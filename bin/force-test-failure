#!/bin/bash

# í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ë¥¼ ê°•ì œë¡œ ë°œìƒì‹œì¼œ ìŠ¤í¬ë¦°ìƒ· ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸

set -e

echo "ðŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ì¤‘..."

# ìž„ì‹œë¡œ ì‹¤íŒ¨í•˜ëŠ” ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ìƒì„±
mkdir -p test/system

cat > test/system/screenshot_test.rb << 'EOF'
require "application_system_test_case"

class ScreenshotTest < ApplicationSystemTestCase
  test "visiting the index page should fail for screenshot demo" do
    visit "/"
    
    # ìŠ¤í¬ë¦°ìƒ· ìƒì„±ì„ ìœ„í•´ ì˜ë„ì ìœ¼ë¡œ ì‹¤íŒ¨
    assert_text "This text does not exist"
    
    # ì¶”ê°€ íŽ˜ì´ì§€ ë°©ë¬¸ìœ¼ë¡œ ë” ë§Žì€ ìŠ¤í¬ë¦°ìƒ· ìƒì„±
    visit "/nonexistent_page"
    assert_text "404"
  end
  
  test "another failing test for more screenshots" do
    visit "/"
    
    # ë‹¤ë¥¸ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤
    assert_selector "h1", text: "Nonexistent Title"
  end
end
EOF

echo "âœ… ì‹¤íŒ¨í•˜ëŠ” ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤: test/system/screenshot_test.rb"
echo ""
echo "ðŸš€ ì´ì œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ìŠ¤í¬ë¦°ìƒ·ì„ ìƒì„±í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:"
echo "  bin/run-ci-tests"
echo ""
echo "âš ï¸  í…ŒìŠ¤íŠ¸ê°€ ì˜ë„ì ìœ¼ë¡œ ì‹¤íŒ¨í•˜ë¯€ë¡œ ìŠ¤í¬ë¦°ìƒ·ì´ tmp/screenshots/ ì— ìƒì„±ë©ë‹ˆë‹¤."
echo ""
echo "ðŸ§¹ í…ŒìŠ¤íŠ¸ ì •ë¦¬:"
echo "  rm test/system/screenshot_test.rb"